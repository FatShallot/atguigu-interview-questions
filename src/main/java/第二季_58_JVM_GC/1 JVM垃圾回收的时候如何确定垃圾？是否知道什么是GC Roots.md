> 视频P58

# 1 JVM垃圾回收的时候如何确定垃圾？是否知道什么是GC Roots?

## 1.1 什么是垃圾

简单来说就是内存中已经不再被使用的空间

## 1.2 要进行垃圾回收，如何判断一个对象是否可以被回收？

- 引用计数法

Java中，引用和对象是有关联的，如果要操作对象就必须引用进行

因此，通过引用计数判断一个对象是否可以回收。给对象中添加一个引用计数器，每当有一个地方引用它，计数器值加1；每当有一个引用失效，计数器值减1。任何时刻计数器值为零的对象就是不可能再被使用的，那么这个对象就是可回收的对象

但它很难解决对象之间互相循环引用的问题

- 枚举根节点做可达性分析（根搜索路径）

为解决引用计数法的循环引用问题，Java使用了可达性分析的方法

GC Root就是一组必须活跃的引用

基本思路就是通过一系列名为GC Root的对象作为起始点，从这个GC Root对象开始向下搜索，如果一个对象到GC Root没有任何引用链相连，则说明此对象不可用。也即给定一个集合的引用作为根触发，通过引用关系遍历对象图，能被遍历到的（可达到的）对象就被判定为存活；没有被遍历到的被判定为死亡

## 1.3 哪些对象可以作为GC Root的对象

- 虚拟机栈（栈帧中的局部变量区，也叫做局部变量表）中引用的对象
- 方法区中的类静态属性引用的对象
- 方法去中常量引用的对象（指final修饰的？）
- 本地方法栈中（Native方法）引用的对象